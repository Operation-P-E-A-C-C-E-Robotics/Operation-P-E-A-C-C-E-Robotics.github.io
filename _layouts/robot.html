---
layout: default
title: {{page.year}}: {{page.robotName}}
---
<!-- <script src="/assets/js/tba.js"></script> -->
<!-- <title>{{ page.year }}: {{page.robotName}} </title> -->
<meta property="og:title" content="Operation PEACCE Robotics - {{ page.year }} {{ page.robotName }}" />
<meta property="og:description" content="{{ page.game }} performace and statistics"/>
<meta property="og:image" content="{{ page.thumbnail }}?width=320">
<meta property="title" content="Operation PEACCE Robotics - {{ page.year }} {{ page.robotName }}" />
<meta property="description" content="{{ page.game }} performace and statistics"/>
<meta property="image" content="{{ page.thumbnail }}?width=320">
<div class="container-fluid">
    <br>

    <div class="d-flex flex-md-row flex-sm-column row">
        <div class="w-md-25 w-sm-20 pr-3 col-sm-12 col-md-6 col-lg-3 pb-3" style="max-width: 25rem; height: 30rem;">
          <div id="demo" class="carousel slide" data-ride="carousel" style="width:100%; height: 30rem; background-color: white; border-radius: 5px;">
            <!-- The slideshow -->
            <img src="{{ page.thumbnail }}" id="robotImagePlaceholder" class="carousel-item img-thumbnail" style="width:100%; height:30rem; object-fit: cover;"></img>
            <div class="carousel-inner" id="robotCarousel">
            </div>
          </div> 
        </div>
        <div class="pl-3 col-sm-12 col-md-9">
            <h1>{{ page.year }} - {{page.robotName}}</h1>
            <h2>{{ page.game }}</h2>
            <h3 id="districtPoints">District Points Earned: --</h3>
            <h3 id="districtRank">District Rank: --</h3>
            <div id="buttons" class="pb-3">
                {% if page.techBinder and page.techBinder != '' %}
                <button type="button" class="btn btn-danger align-middle" data-toggle="modal" data-target="#myModal">
                    View Technical Binder
                    <i class="fa fa-book align-middle" style="font-size:25px"></i>
                  </button>
                {% else %}
                <button type="button" class="btn btn-danger  disabled align-middle" id="techBinder">View Technical Binder <i class="fa fa-book align-middle" style="font-size:25px"></i></button>
                {% endif %}
                <button type="button" class="btn btn-primary align-middle" onclick="window.location.assign('https://www.thebluealliance.com/team/3461/{{ page.year }}');">View On The Blue Alliance <span><img style="height: 25px;" src="/assets/images/tba_lamp.svg"></span></button>
            </div>
            {{ content }}
        </div>
    </div>
    <br>


    <div class="table-responsive pt-2 rounded-lg">
        <table id="employees" class="table table-bordered table-striped table-light text-dark"></table>
    </div> 

    {% if page.matchVideoPlaylist && page.matchVideoPlaylist != "" %}
    <div class="embed-responsive embed-responsive-16by9 w-75 mx-auto">
      <iframe src="https://www.youtube-nocookie.com/embed/videoseries?list={{page.matchVideoPlaylist}}" title="YouTube video player" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
    </div>
    {% endif %}

</div>


<!-- The Modal -->
<div class="modal fade text-dark" id="myModal">
    <div class="modal-dialog modal-xl modal-dialog-scrollable">
      <div class="modal-content">
      
            <!-- Modal Header -->
            <div class="modal-header">
            <h4 class="modal-title">{{ page.year }} Technical Binder</h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            
            <!-- Modal body -->
            <div class="modal-body">
                <object data="{{page.techBinder}}#view=Fit" type="application/pdf" width="100%" height="650">
                    <p>
                        It appears your Web browser is not configured to display PDF files. No worries, just <a href="{{page.techBinder}}">click here to download the PDF file.</a>
                    </p>
                </object> 
            </div>
            
            <!-- Modal footer -->
            <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        
      </div>
    </div>
</div>
  



<script>


  var events = "https://www.thebluealliance.com/api/v3/team/frc3461/events/";
  var year = "{{page.year}}";
  
  var eventstatuses = "/statuses?X-TBA-Auth-Key=hOngAA1OYRpYtrfePLodT2G27R7fSBfrGJ57RwH1sOZJxaJv3rHGfhH37aLitVNb"
  const authKey = "?X-TBA-Auth-Key=hOngAA1OYRpYtrfePLodT2G27R7fSBfrGJ57RwH1sOZJxaJv3rHGfhH37aLitVNb" 
  var district = "https://www.thebluealliance.com/api/v3/district/" +year +"ne/rankings"+authKey
  var media = "https://www.thebluealliance.com/api/v3/team/frc3461/media/"
  var awards = "https://www.thebluealliance.com/api/v3/team/frc3461/awards/"


  var eventstats = events + year + eventstatuses;
  var eventurl = events + year + authKey;
  var mediaurl = media + year + authKey;
  var awardsurl = awards + year + authKey;
  var countDownDate;

  function json2array(json) {
    var result = [];
    for (var i in json) {
      result.push([i, json[i]]);
    }
    return result;
  }
  // Defining async function


  function viewOnTBA() {
   window.location.assign('https://www.thebluealliance.com/team/3461/' + year);
  }

  async function getMedia(mediaURL) {
    const apiResponse = await fetch(mediaURL);
    const mediaJSON = await apiResponse.json();
    ////console.log(mediaJSON);
    var hasPlacedImage = false;
    if (mediaJSON.length != 0)
   for (var i = 0; i < mediaJSON.length; i++) {
       const tempMedia = mediaJSON[i];
       ////console.log(mediaJSON[i]);
       if (mediaJSON[i].preferred == true && mediaJSON[i].direct_url != undefined) {

       if (hasPlacedImage == false) {
           document.getElementById("robotCarousel").innerHTML += `<img src="${mediaJSON[i].direct_url}" class="carousel-item active img-thumbnail" style="width:100%; height:30rem; object-fit: cover;"></img>`;
           document.getElementById("image").setAttribute("content", mediaJSON[i].direct_url);
           hasPlacedImage = true;
       } else {
           document.getElementById("robotCarousel").innerHTML += `<img src="${mediaJSON[i].direct_url}" class="carousel-item img-thumbnail" style="width:100%; height:30rem; object-fit: cover;"></img>`;
       }


       }
   }

   if (mediaJSON.length == 0 || hasPlacedImage == false) {
       document.getElementById("robotImagePlaceholder").classList.add("active");
   }

    if (mediaJSON.length == 0) {
      document.getElementById("robotImagePlaceholder").classList.add("active");
    }

  }

  async function getapi(eventurl, eventstats, awards) {
    const eventResponse = await fetch(eventurl);
    const eventStats = await fetch(eventstats);
    const awardsData = await fetch(awards);
    // Storing data in form of JSON
    var eventdata = await eventResponse.json();
    // var eventdata = JSON.parse(eventdatatemp);
    var eventstatdata = await eventStats.json();
    var awardsForYear = await awardsData.json();
    /* //console.log("Event Data")
     //console.log(eventdata);
     //console.log("Event Stats")
     //console.log(eventstatdata); */
     //console.log(eventdata); 
     eventKeyValueArray = {};
     for (var i = 0; i < eventdata.length; i++){
       //console.log(i)
       eventKeyValueArray[[eventdata[i].key]] = eventdata[i];
     }


    show(eventstatdata, eventKeyValueArray, awardsForYear);

    document.getElementById("header").innerHTML = year + " Competition Season"
    
  }
  // Calling that async function
  getapi(eventurl, eventstats, awardsurl);
  getDistrictStats(district);
  getMedia(mediaurl);

  async function getDistrictStats(district) {
   var districtResponse = await fetch(district);
   var districtJSON = await districtResponse.json();
   var teamDistrictRankings;
   
   for (var i = 0; i < districtJSON.length; i++) {
     if (districtJSON[i].team_key == "frc3461") {
       ////console.log(districtJSON[i]);
       document.getElementById("districtRank").innerHTML = "Current District Rank: " + districtJSON[i].rank; 
       document.getElementById("districtPoints").innerHTML = "Current District Points: " + districtJSON[i].point_total; 
     }
   }

  }











  // Function to define innerHTML for HTML table
  function show(event, stats, awards) {
           ////console.log("event info");
           ////console.log(event);
           //  //console.log("match info");
           //  //console.log(stats); 
    let tab =
      `<tr>
        <th>Event Name</th>
        <th>Ranking</th>
        <th>Awards</th>
    </tr>`;

     var result = stats;
   //  var statResult = json2array(stats);

    length = result.length;
    ////console.log(result);
     eventInfo = new Object();
   //  values = [];
     for (var i = 0; i < length; i++) {
     //  eventInfo.assign([result[i].key, result[i]]);
      
    }
    //console.log(stats)
    if (length == 0) {
      tab = `<h1 class=text-center>No Events Found</h1>`
      document.getElementById("employees").innerHTML = tab;
    }

    ////console.log(values);
    ////console.log(awards)
   for (const [key, value] of Object.entries(event)) {
     var eventInfo = "";  
     // Object.keys(stats).forEach(createArray(key));
     

     

     if (value != null) {
       
       var badge = ""
       switch(stats[key].event_type_string) {
         case "Preseason":
           badge = `<span class="badge badge-pill badge-secondary">Preseason Event</span>`
           break;
         case "Offseason":
           badge = `<span class="badge badge-pill badge-secondary">Offseason Event</span>`
           break;
         
         case "Regional":
           badge = `<span class="badge badge-pill badge-primary">Week ${stats[key].week + 1} Regional Event</span>`
           break;
         case "District":
           badge = `<span class="badge badge-pill badge-primary">Week ${stats[key].week + 1} District Event</span>`
           break;
         case "District Championship Division":
           badge = `<span class="badge badge-pill badge-info">DCMP Division</span>`
           break;
         case "District Championship":
           badge = `<span class="badge badge-pill badge-info">DCMP</span>`
           break;
         case "Championship Division":
           badge = `<span class="badge badge-pill badge-success">CMP Division</span>`
           break;
         case "Championship Finals":
           badge = `<span class="badge badge-pill badge-success">CMP Einstein</span>`
           break;

         default:
           // code block
       }
       //console.log("key");
       //console.log(key);
       //console.log("value")
       //console.log(value);
       tab += `<tr><td date=${stats[key].start_date} id=${key}><a class="text-dark" href="https://www.thebluealliance.com/event/${key}">${stats[key].name} ${badge}</a></td><td id="${key}eventstatus">${value.overall_status_str}</td><td id=${key + "awards"}>None Found</td></tr>`;
       // document.getElementById(value.key + "eventstatus").innerHTML = 
     } else {
     tab += `<tr><td date=${stats[key].start_date} id=${key}><a class="text-dark" href="https://www.thebluealliance.com/event/${key}">${stats[key].name} ${badge}</a></td><td>Check back on ${stats[key].start_date}</td><td>No Data</td></tr>`
     }
     // Setting innerHTML as tab variable
     document.getElementById("employees").innerHTML = tab;
     sortTable();
     }


    ////console.log(awards);
    for (var i = 0; i < awards.length; i++) {
      ////console.log(awards[i]);
      document.getElementById(awards[i].event_key + "awards").innerHTML = awards[i].name;
    }

  }
  function sortTable() {
 var table, rows, switching, i, x, y, shouldSwitch;
 table = document.getElementById("employees");
 switching = true;
 /* Make a loop that will continue until
 no switching has been done: */
 while (switching) {
   // Start by saying: no switching is done:
   switching = false;
   rows = table.rows;
   /* Loop through all table rows (except the
   first, which contains table headers): */
   for (i = 1; i < (rows.length - 1); i++) {
     // Start by saying there should be no switching:
     shouldSwitch = false;
     /* Get the two elements you want to compare,
     one from current row and one from the next: */
     x = rows[i].getElementsByTagName("TD")[0];
     y = rows[i + 1].getElementsByTagName("TD")[0];
     xTime = Date.parse(x.getAttribute("date"));
     yTime = Date.parse(y.getAttribute("date"));
     // Check if the two rows should switch place:
     if (xTime > yTime) {
       // If so, mark as a switch and break the loop:
       shouldSwitch = true;
       break;
     }
   }
   if (shouldSwitch) {
     /* If a switch has been marked, make the switch
     and mark that a switch has been done: */
     rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
     switching = true;
   }
 }
}




</script>